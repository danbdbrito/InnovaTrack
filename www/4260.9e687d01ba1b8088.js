"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4260],{2543:(I,E,d)=>{d.d(E,{_:()=>R});var p=d(467),O=d(3953),F=d(1977);let R=(()=>{var m;class f{constructor(c){this.ngFireAuth=c}getUserUID(){var c=this;return(0,p.A)(function*(){const g=yield c.ngFireAuth.currentUser;return g?g.uid:null})()}registerUser(c,g,y){var D=this;return(0,p.A)(function*(){const U=yield D.ngFireAuth.createUserWithEmailAndPassword(c,g);return U.user&&(yield U.user.updateProfile({displayName:y})),U})()}loginUser(c,g){var y=this;return(0,p.A)(function*(){return yield y.ngFireAuth.signInWithEmailAndPassword(c,g)})()}resetPassword(c){var g=this;return(0,p.A)(function*(){return yield g.ngFireAuth.sendPasswordResetEmail(c)})()}signOut(){var c=this;return(0,p.A)(function*(){return yield c.ngFireAuth.signOut()})()}getProfile(){var c=this;return(0,p.A)(function*(){const g=yield c.ngFireAuth.currentUser;return g&&!g.displayName&&console.warn("El displayName no est\xe1 configurado en Firebase"),g})()}}return(m=f).\u0275fac=function(c){return new(c||m)(O.KVO(F.DS))},m.\u0275prov=O.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),f})()},3503:(I,E,d)=>{d.d(E,{n:()=>R});var p=d(467),O=d(3953),F=d(369);let R=(()=>{var m;class f{constructor(c){this.storage=c,this._storage=null,this.init()}init(){var c=this;return(0,p.A)(function*(){const g=yield c.storage.create();c._storage=g})()}set(c,g){var y=this;return(0,p.A)(function*(){var D;return y._storage||(yield y._storage),null===(D=y._storage)||void 0===D?void 0:D.set(c,g)})()}get(c){var g=this;return(0,p.A)(function*(){var y;return g._storage||(yield g.init()),null===(y=g._storage)||void 0===y?void 0:y.get(c)})()}remove(c){var g=this;return(0,p.A)(function*(){var y;return g._storage||(yield g.init()),null===(y=g._storage)||void 0===y?void 0:y.remove(c)})()}clear(){var c=this;return(0,p.A)(function*(){var g;return c._storage||(yield c.init()),null===(g=c._storage)||void 0===g?void 0:g.clear()})()}}return(m=f).\u0275fac=function(c){return new(c||m)(O.KVO(F.w))},m.\u0275prov=O.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),f})()},3614:(I,E,d)=>{d.d(E,{c:()=>Ne});var p=d(467),O=d(99),F=d(9350),R=d(7707);function m(n,e){const t="object"==typeof e;return new Promise((r,a)=>{const s=new R.Ms({next:u=>{r(u),s.unsubscribe()},error:a,complete:()=>{t?r(e.defaultValue):a(new F.G)}});n.subscribe(s)})}var f=d(3953),_=d(1977),c=d(9842),g=d(5407),y=d(9253),D=d(6354),U=d(7647),N=d(2816),L=d(9974),T=d(4360),q=d(8750),ee=d(3669),te=d(5343),re=d(3794),se=d(5558),ie=d(3294),oe=d(3236),le=d(1985),$=d(7786),ue=d(7673),de=(d(2438),d(3345)),S=d(1362),o=d(463),i=d(1076);const fe=new(d(8041).Vy)("@firebase/database-compat"),j=function(n){fe.warn("FIREBASE WARNING: "+n)};class me{constructor(e){this._delegate=e}cancel(e){(0,i.od)("OnDisconnect.cancel",0,1,arguments.length),(0,i.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,i.od)("OnDisconnect.remove",0,1,arguments.length),(0,i.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,i.od)("OnDisconnect.set",1,2,arguments.length),(0,i.oD)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),a=>t(a)),r}setWithPriority(e,t,r){(0,i.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,i.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const a=this._delegate.setWithPriority(e,t);return r&&a.then(()=>r(null),s=>r(s)),a}update(e,t){if((0,i.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const a={};for(let s=0;s<e.length;++s)a[""+s]=e[s];e=a,j("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,i.oD)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),a=>t(a)),r}}class pe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,i.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class P{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,i.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,i.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,i.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,i.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,i.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),(0,o.Kd)("DataSnapshot.child","path",e,!1),new P(this._database,this._delegate.child(e))}hasChild(e){return(0,i.od)("DataSnapshot.hasChild",1,1,arguments.length),(0,o.Kd)("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,i.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,i.od)("DataSnapshot.forEach",1,1,arguments.length),(0,i.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new P(this._database,t)))}hasChildren(){return(0,i.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,i.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,i.od)("DataSnapshot.ref",0,0,arguments.length),new b(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class A{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,a){var s;(0,i.od)("Query.on",2,4,arguments.length),(0,i.oD)("Query.on","callback",t,!1);const u=A.getCancelAndContextArgs_("Query.on",r,a),h=(v,w)=>{t.call(u.context,new P(this.database,v),w)};h.userCallback=t,h.context=u.context;const l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return(0,o.Zy)(this._delegate,h,l),t;case"child_added":return(0,o._O)(this._delegate,h,l),t;case"child_removed":return(0,o.U0)(this._delegate,h,l),t;case"child_changed":return(0,o.M4)(this._delegate,h,l),t;case"child_moved":return(0,o.X1)(this._delegate,h,l),t;default:throw new Error((0,i.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,i.od)("Query.off",0,3,arguments.length),function(n,e){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,i.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,i.oD)("Query.off","callback",t,!0),(0,i.HN)("Query.off","context",r,!0),t){const a=()=>{};a.userCallback=t,a.context=r,(0,o.AU)(this._delegate,e,a)}else(0,o.AU)(this._delegate,e)}get(){return(0,o.Jt)(this._delegate).then(e=>new P(this.database,e))}once(e,t,r,a){(0,i.od)("Query.once",1,4,arguments.length),(0,i.oD)("Query.once","callback",t,!0);const s=A.getCancelAndContextArgs_("Query.once",r,a),u=new i.cY,h=(v,w)=>{const C=new P(this.database,v);t&&t.call(s.context,C,w),u.resolve(C)};h.userCallback=t,h.context=s.context;const l=v=>{s.cancel&&s.cancel.call(s.context,v),u.reject(v)};switch(e){case"value":(0,o.Zy)(this._delegate,h,l,{onlyOnce:!0});break;case"child_added":(0,o._O)(this._delegate,h,l,{onlyOnce:!0});break;case"child_removed":(0,o.U0)(this._delegate,h,l,{onlyOnce:!0});break;case"child_changed":(0,o.M4)(this._delegate,h,l,{onlyOnce:!0});break;case"child_moved":(0,o.X1)(this._delegate,h,l,{onlyOnce:!0});break;default:throw new Error((0,i.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,i.od)("Query.limitToFirst",1,1,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.pk)(e)))}limitToLast(e){return(0,i.od)("Query.limitToLast",1,1,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.$1)(e)))}orderByChild(e){return(0,i.od)("Query.orderByChild",1,1,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.kT)(e)))}orderByKey(){return(0,i.od)("Query.orderByKey",0,0,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.JK)()))}orderByPriority(){return(0,i.od)("Query.orderByPriority",0,0,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.og)()))}orderByValue(){return(0,i.od)("Query.orderByValue",0,0,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.VR)()))}startAt(e=null,t){return(0,i.od)("Query.startAt",0,2,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.EO)(e,t)))}startAfter(e=null,t){return(0,i.od)("Query.startAfter",0,2,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.HM)(e,t)))}endAt(e=null,t){return(0,i.od)("Query.endAt",0,2,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.FD)(e,t)))}endBefore(e=null,t){return(0,i.od)("Query.endBefore",0,2,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.rf)(e,t)))}equalTo(e,t){return(0,i.od)("Query.equalTo",1,2,arguments.length),new A(this.database,(0,o.P)(this._delegate,(0,o.iz)(e,t)))}toString(){return(0,i.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,i.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,i.od)("Query.isEqual",1,1,arguments.length),!(e instanceof A))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const a={cancel:void 0,context:void 0};if(t&&r)a.cancel=t,(0,i.oD)(e,"cancel",a.cancel,!0),a.context=r,(0,i.HN)(e,"context",a.context,!0);else if(t)if("object"==typeof t&&null!==t)a.context=t;else{if("function"!=typeof t)throw new Error((0,i.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");a.cancel=t}return a}get ref(){return new b(this.database,new o.t2(this._delegate._repo,this._delegate._path))}}class b extends A{constructor(e,t){super(e,new o.YL(t._repo,t._path,new o.EZ,!1)),this.database=e,this._delegate=t}getKey(){return(0,i.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,i.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new b(this.database,(0,o.jf)(this._delegate,e))}getParent(){(0,i.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new b(this.database,e):null}getRoot(){return(0,i.od)("Reference.root",0,0,arguments.length),new b(this.database,this._delegate.root)}set(e,t){(0,i.od)("Reference.set",1,2,arguments.length),(0,i.oD)("Reference.set","onComplete",t,!0);const r=(0,o.hZ)(this._delegate,e);return t&&r.then(()=>t(null),a=>t(a)),r}update(e,t){if((0,i.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const a={};for(let s=0;s<e.length;++s)a[""+s]=e[s];e=a,j("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.j2)("Reference.update",this._delegate._path),(0,i.oD)("Reference.update","onComplete",t,!0);const r=(0,o.yo)(this._delegate,e);return t&&r.then(()=>t(null),a=>t(a)),r}setWithPriority(e,t,r){(0,i.od)("Reference.setWithPriority",2,3,arguments.length),(0,i.oD)("Reference.setWithPriority","onComplete",r,!0);const a=(0,o.$w)(this._delegate,e,t);return r&&a.then(()=>r(null),s=>r(s)),a}remove(e){(0,i.od)("Reference.remove",0,1,arguments.length),(0,i.oD)("Reference.remove","onComplete",e,!0);const t=(0,o.TF)(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,i.od)("Reference.transaction",1,3,arguments.length),(0,i.oD)("Reference.transaction","transactionUpdate",e,!1),(0,i.oD)("Reference.transaction","onComplete",t,!0),function(n,e,t){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,i.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const a=(0,o.c4)(this._delegate,e,{applyLocally:r}).then(s=>new pe(s.committed,new P(this.database,s.snapshot)));return t&&a.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),a}setPriority(e,t){(0,i.od)("Reference.setPriority",1,2,arguments.length),(0,i.oD)("Reference.setPriority","onComplete",t,!0);const r=(0,o.zm)(this._delegate,e);return t&&r.then(()=>t(null),a=>t(a)),r}push(e,t){(0,i.od)("Reference.push",0,2,arguments.length),(0,i.oD)("Reference.push","onComplete",t,!0);const r=(0,o.VC)(this._delegate,e),a=r.then(u=>new b(this.database,u));t&&a.then(()=>t(null),u=>t(u));const s=new b(this.database,r);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s}onDisconnect(){return(0,o.j2)("Reference.onDisconnect",this._delegate._path),new me(new o.wu(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class K{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:o.CA,forceLongPolling:o.V0}}useEmulator(e,t,r={}){(0,o.VJ)(this._delegate,e,t,r)}ref(e){if((0,i.od)("database.ref",0,1,arguments.length),e instanceof b){const t=(0,o.D8)(this._delegate,e.toString());return new b(this,t)}{const t=(0,o.KR)(this._delegate,e);return new b(this,t)}}refFromURL(e){(0,i.od)("database.refFromURL",1,1,arguments.length);const r=(0,o.D8)(this._delegate,e);return new b(this,r)}goOffline(){return(0,i.od)("database.goOffline",0,0,arguments.length),(0,o.Mq)(this._delegate)}goOnline(){return(0,i.od)("database.goOnline",0,0,arguments.length),(0,o.eO)(this._delegate)}}K.ServerValue={TIMESTAMP:(0,o.O5)(),increment:n=>(0,o.GV)(n)};var _e=Object.freeze({__proto__:null,initStandalone:function Ae({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:a,namespace:s,nodeAdmin:u=!1}){(0,o.SF)(t);const h=new S.h1("database-standalone"),l=new S.Kq("auth-internal",h);let v;return l.setComponent(new S.uA("auth-internal",()=>r,"PRIVATE")),a&&(v=new S.Kq("app-check-internal",h),v.setComponent(new S.uA("app-check-internal",()=>a,"PRIVATE"))),{instance:new K((0,o.Di)(n,l,v,e,u),n),namespace:s}}});const be=K.ServerValue;function V(n,e,t="on",r=oe.E){return new le.c(a=>{let s=null;return s=n[t](e,(u,h)=>{r.schedule(()=>{a.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>a.complete())},u=>{r.schedule(()=>a.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,D.T)(a=>{const{snapshot:s,prevKey:u}=a;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:u,key:h}}),(0,U.u)())}function B(n){return null==n}function W(n){return"function"==typeof n.set}function Q(n,e){return W(e)?e:n.ref(e)}function k(n,e){if(function Pe(n){return"string"==typeof n}(n))return e.stringCase();if(W(n))return e.firebaseCase();if(function Oe(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function J(n){return(B(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Z(n,e,t){const r=(e=J(e)).map(a=>V(n,a,"on",t));return(0,$.h)(...r)}function G(n,e){return function(r,a){return k(r,{stringCase:()=>n.child(r)[e](a),firebaseCase:()=>r[e](a),snapshotCase:()=>r.ref[e](a)})}}function Fe(n){return function(t){return t?k(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function H(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Ke(n,e){var t;const{payload:r,prevKey:a,key:s}=e,u=H(n,s),h=function Ue(n,e){if(B(e))return 0;{const t=H(n,e);return-1===t?n.length:t+1}}(n,a);switch(e.type){case"value":if(null!==(t=e.payload)&&void 0!==t&&t.exists()){let l=null;e.payload.forEach(v=>{const w={payload:v,type:"value",prevKey:l,key:v.key};return l=v.key,n=[...n,w],!1})}return n;case"child_added":if(u>-1){const l=n[u-1];((null==l?void 0:l.key)||null)!==a&&(n=n.filter(v=>v.payload.key!==r.key)).splice(h,0,e)}else{if(null==a)return[e,...n];(n=n.slice()).splice(h,0,e)}return n;case"child_removed":return n.filter(l=>l.payload.key!==r.key);case"child_changed":return n.map(l=>l.payload.key===s?e:l);case"child_moved":if(u>-1){const l=n.splice(u,1)[0];return(n=n.slice()).splice(h,0,l),n}return n;default:return n}}function z(n,e,t){return function Re(n,e,t){return V(n,"value","once",t).pipe((0,se.n)(r=>{const a=[(0,ue.of)(r)];return e.forEach(s=>a.push(V(n,s,"on",t))),(0,$.h)(...a).pipe((0,N.S)(Ke,[]))}),(0,ie.F)())}(n,e=J(e),t)}function X(n,e){return function(){return V(n,"value","on",e)}}!function De(n){n.INTERNAL.registerComponent(new S.uA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),a=e.getProvider("database").getImmediate({identifier:t});return new K(a,r)},"PUBLIC").setServiceProps({Reference:b,Query:A,Database:K,DataSnapshot:P,enableLogging:o.TS,INTERNAL:_e,ServerValue:be}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.7")}(de.A),d(7935);const xe=new f.nKC("angularfire2.realtimeDatabaseURL"),Te=new f.nKC("angularfire2.database.use-emulator");let Me=(()=>{var n;class e{constructor(r,a,s,u,h,l,v,w,C,Le,$e,je,Be,We,Ze){(0,c.A)(this,"schedulers",void 0),(0,c.A)(this,"database",void 0),this.schedulers=l;const M=v,x=(0,y.iB)(r,h,a);w&&(0,_.gF)(x,h,C,$e,je,Be,Le,We),this.database=(0,y.BM)(`${x.name}.database.${s}`,"AngularFireDatabase",x.name,()=>{const Y=h.runOutsideAngular(()=>x.database(s||void 0));return M&&Y.useEmulator(...M),Y},[M])}list(r,a){const s=this.schedulers.ngZone.runOutsideAngular(()=>Q(this.database,r));let u=s;return a&&(u=a(s)),function Ve(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:G(r,"update"),set:G(r,"set"),push:a=>r.push(a),remove:Fe(r),snapshotChanges:a=>z(n,a,t).pipe(g.U0),stateChanges:a=>Z(n,a,t).pipe(g.U0),auditTrail:a=>function we(n,e,t){return function Ee(n,e,t){return function Se(n,e){return V(n,"value","on",e).pipe((0,D.T)(t=>{let r;return t.payload.forEach(a=>(r=a.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function ne(...n){const e=(0,re.ms)(n);return(0,L.N)((t,r)=>{const a=n.length,s=new Array(a);let u=n.map(()=>!1),h=!1;for(let l=0;l<a;l++)(0,q.Tg)(n[l]).subscribe((0,T._)(r,v=>{s[l]=v,!h&&!u[l]&&(u[l]=!0,(h=u.every(ee.D))&&(u=null))},te.l));t.subscribe((0,T._)(r,l=>{if(h){const v=[l,...s];r.next(e?e(...v):v)}}))})}(e),(0,D.T)(([a,s])=>{const u=a.lastKeyToLoad,h=s.map(l=>l.key);return{actions:s,lastKeyToLoad:u,loadedKeys:h}}),function ae(n){return(0,L.N)((e,t)=>{let r=!1,a=0;e.subscribe((0,T._)(t,s=>(r||(r=!n(s,a++)))&&t.next(s)))})}(a=>-1===a.loadedKeys.indexOf(a.lastKeyToLoad)),(0,D.T)(a=>a.actions))}(n,Z(n,e).pipe((0,N.S)((a,s)=>[...a,s],[])),t)}(n,a,t).pipe(g.U0),valueChanges:(a,s)=>z(n,a,t).pipe((0,D.T)(h=>h.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),g.U0)}}(u,this)}object(r){return function Ce(n,e){return{query:n,snapshotChanges:()=>X(n,e.schedulers.outsideAngular)().pipe(g.U0),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>X(n,e.schedulers.outsideAngular)().pipe(g.U0,(0,D.T)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Q(this.database,r)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n=e,(0,c.A)(e,"\u0275fac",function(r){return new(r||n)(f.KVO(y.rx),f.KVO(y.uP,8),f.KVO(xe,8),f.KVO(f.Agw),f.KVO(f.SKi),f.KVO(g.u0),f.KVO(Te,8),f.KVO(_.DS,8),f.KVO(_.CP,8),f.KVO(_.yy,8),f.KVO(_.ZP,8),f.KVO(_.$z,8),f.KVO(_.AU,8),f.KVO(_.UB,8),f.KVO(g.Jv,8))}),(0,c.A)(e,"\u0275prov",f.jDH({token:n,factory:n.\u0275fac,providedIn:"any"})),e})();var Ie=d(3503);let Ne=(()=>{var n;class e{constructor(r,a,s){this.ngFireAuth=r,this.db=a,this.storageService=s}createUserProfile(r,a,s){var u=this;return(0,p.A)(function*(){try{yield u.db.object(`/users/${r}`).set({email:a,displayName:s,photoURL:""});const l={uid:r,email:a,displayName:s,photoURL:""};return yield u.storageService.set("user",l),{success:!0,message:"Perfil creado en Firestore"}}catch(h){throw new Error("Error al crear el perfil en Firestore: "+h.message)}})()}getUserProfile(){var r=this;return(0,p.A)(function*(){const a=yield m(r.ngFireAuth.authState);if(a)return m(r.db.object(`/users/${a.uid}`).valueChanges());throw new Error("Usuario no autenticado")})()}updateUserProfile(r){var a=this;return(0,p.A)(function*(){const s=yield m(a.ngFireAuth.authState);if(s){yield a.db.object(`/users/${s.uid}`).update(r),r.displayName&&(yield(0,O.r7)(s,{displayName:r.displayName}));const u={...r,uid:s.uid,email:s.email};return yield a.storageService.set("user",u),{sucess:!0,message:"Perfil actualizado con \xe9xito"}}throw new Error("Usuario no autenticado")})()}deleteUserProfile(){var r=this;return(0,p.A)(function*(){const a=yield m(r.ngFireAuth.authState);if(a)return yield r.db.object(`/users/${a.uid}`).remove(),yield a.delete(),{sucess:!0,message:"Usuario eliminado con \xe9xito"};throw new Error("Usuario no autenticado")})()}}return(n=e).\u0275fac=function(r){return new(r||n)(f.KVO(_.DS),f.KVO(Me),f.KVO(Ie.n))},n.\u0275prov=f.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),e})()}}]);